#!/bin/bash
export JAR_FILE={{ jar_name }}
cd /home/{{ user_to_create }}
/usr/lib/jvm/jdk-13/bin/java --enable-preview  -javaagent:/home/{{ user_to_create }}/lib/jmx_prometheus_javaagent-0.12.0.jar={{promotheus_port}}://home/{{ user_to_create }}/config/config_prometheus.yml   -Xlog:gc*,gc+phases*,gc+region*=debug:file=/home/{{ user_to_create }}/logs/{{ user_to_create }}_log.gc:time:filecount=10:filesize=1024 -XX:+UseParallelGC  -XX:ParallelGCThreads=4 -XX:InitiatingHeapOccupancyPercent=45 -Xmx{{application_xmx | default('512m')  }} -Xms{{application_xms | default('512m')  }} -Djava.net.preferIPv4Stack=true -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/{{ user_to_create }}/logs/heap.hprof -Dlog4j.configuration=config/log4j.xml -Djava.security.auth.login.config=/home/{{ user_to_create }}/config/client_jaas.conf -Dloader.path=/home/{{ user_to_create }}/config -jar lib/${JAR_FILE} 